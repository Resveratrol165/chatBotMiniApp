{"version":3,"names":["ChatMessage","props","__props","emit","__emit","scrollTop","common_vendor","ref","watch","chatData","chat","nextTick","value","deep","handleScrollToUpper","wx","createComponent","Component"],"sources":["MessageList.vue","RTovV29ya3NwYWNlL21pbmlhcHAvY2hhdEJvdE1pbmlBcHAvY29tcG9uZW50cy9NZXNzYWdlTGlzdC52dWU"],"sourcesContent":["<template>\r\n  <scroll-view \r\n    class=\"message-list-container\"\r\n    scroll-y\r\n    :scroll-top=\"scrollTop\"\r\n    @scrolltoupper=\"handleScrollToUpper\"\r\n  >\r\n    <view v-if=\"loading\" class=\"loading-more\">\r\n      加载中...\r\n    </view>\r\n    \r\n    <view class=\"messages-list\">\r\n      <chat-message\r\n        v-for=\"(message, index) in chatData.chat\"\r\n        :key=\"index\"\r\n        :message=\"message\"\r\n        :user-avatar=\"chatData.userAvatar\"\r\n        :bot-avatar=\"chatData.botAvatar\"\r\n        :user-name=\"chatData.userName\"\r\n        :bot-name=\"chatData.botName\"\r\n      />\r\n    </view>\r\n  </scroll-view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch } from 'vue'\r\nimport ChatMessage from './ChatMessage.vue'\r\n\r\nconst props = defineProps({\r\n  chatData: {\r\n    type: Object,\r\n    required: true\r\n  },\r\n  loading: {\r\n    type: Boolean,\r\n    default: false\r\n  }\r\n})\r\n\r\nconst emit = defineEmits(['load-more'])\r\n\r\nconst scrollTop = ref(0)\r\n\r\n// 监听消息列表变化，自动滚动到底部\r\nwatch(\r\n  () => props.chatData.chat,\r\n  () => {\r\n    nextTick(() => {\r\n      scrollTop.value = 99999\r\n    })\r\n  },\r\n  { deep: true }\r\n)\r\n\r\n// 处理上拉加载更多\r\nconst handleScrollToUpper = () => {\r\n  emit('load-more')\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.message-list-container {\r\n  flex: 1;\r\n  height: calc(100vh - 60px - env(safe-area-inset-bottom));\r\n}\r\n\r\n.loading-more {\r\n  text-align: center;\r\n  padding: 10px 0;\r\n  color: #999;\r\n  font-size: 14px;\r\n}\r\n\r\n.messages-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  padding: 20px;\r\n}\r\n</style> ","import Component from 'E:/Workspace/miniapp/chatBotMiniApp/components/MessageList.vue'\nwx.createComponent(Component)"],"mappings":";;;;;;;;AA2BA,IAAMA,WAAA,GAAc,SAAdA,YAAA;EAAA,OAAyB;AAAA;;;;;;;;;;;;;;;;IAE/B,IAAMC,KAAA,GAAQC,OAAA;IAWd,IAAMC,IAAA,GAAOC,MAAA;IAEb,IAAMC,SAAA,GAAYC,aAAA,CAAGC,GAAA,CAAC,CAAC;IAGvBD,aAAA,CAAKE,KAAA,CACH;MAAA,OAAMP,KAAA,CAAMQ,QAAA,CAASC,IAAA;IAAA,GACrB,YAAM;MACJC,QAAA,CAAS,YAAM;QACbN,SAAA,CAAUO,KAAA,GAAQ;MACxB,CAAK;IACF,GACD;MAAEC,IAAA,EAAM;IAAM,EAChB;IAGA,IAAMC,mBAAA,GAAsB,SAAtBA,oBAAA,EAA4B;MAChCX,IAAA,CAAK,WAAW;IAClB;;;;;;;;;;;;;;;;;;;;;ACzDAY,EAAA,CAAGC,eAAA,CAAgBC,SAAS","ignoreList":[]}