{"version":3,"file":"addBotView.js","sources":["pages/addBotView.vue","../../../Tools/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkQm90Vmlldy52dWU"],"sourcesContent":["<template>\r\n  <view class=\"add-bot-view\">\r\n    <view class=\"header\">\r\n      <view \r\n        class=\"nav-right\" \r\n        :class=\"{ disabled: !isFormValid }\"\r\n        @click=\"handleSave\"\r\n      >\r\n        <text>保存</text>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"content\">\r\n      <view class=\"avatar-section\">\r\n        <view class=\"avatar-wrapper\" @click=\"chooseImage\">\r\n          <van-image\r\n            round\r\n            width=\"120rpx\"\r\n            height=\"120rpx\"\r\n            :src=\"formData.avatar || '/static/default_avatar.png'\"\r\n          />\r\n          <view class=\"avatar-overlay\">\r\n            <text class=\"material-symbols-outlined\">photo_camera</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"form-fields\">\r\n        <view class=\"md3-field\" :class=\"{\r\n          'md3-field--focused': focusedField === 'name',\r\n          'md3-field--filled': formData.name\r\n        }\">\r\n          <input\r\n            v-model=\"formData.name\"\r\n            class=\"md3-field__input\"\r\n            placeholder=\" \"\r\n            :maxlength=\"20\"\r\n            @focus=\"focusedField = 'name'\"\r\n            @blur=\"focusedField = ''\"\r\n          />\r\n          <label class=\"md3-field__label\">名称</label>\r\n          <text class=\"md3-field__counter\">{{ formData.name.length }}/20</text>\r\n        </view>\r\n        \r\n        <view class=\"md3-field\" :class=\"{\r\n          'md3-field--focused': focusedField === 'description',\r\n          'md3-field--filled': formData.description\r\n        }\">\r\n          <input\r\n            v-model=\"formData.description\"\r\n            class=\"md3-field__input\"\r\n            placeholder=\" \"\r\n            :maxlength=\"50\"\r\n            @focus=\"focusedField = 'description'\"\r\n            @blur=\"focusedField = ''\"\r\n          />\r\n          <label class=\"md3-field__label\">描述</label>\r\n          <text class=\"md3-field__counter\">{{ formData.description.length }}/50</text>\r\n        </view>\r\n        \r\n        <view class=\"md3-field md3-field--multiline\" :class=\"{\r\n          'md3-field--focused': focusedField === 'greeting',\r\n          'md3-field--filled': formData.greeting\r\n        }\">\r\n          <textarea\r\n            v-model=\"formData.greeting\"\r\n            class=\"md3-field__textarea\"\r\n            placeholder=\" \"\r\n            :maxlength=\"100\"\r\n            @focus=\"focusedField = 'greeting'\"\r\n            @blur=\"focusedField = ''\"\r\n          />\r\n          <label class=\"md3-field__label\">欢迎语</label>\r\n          <text class=\"md3-field__counter\">{{ formData.greeting.length }}/100</text>\r\n        </view>\r\n        \r\n        <view class=\"md3-field md3-field--multiline\" :class=\"{\r\n          'md3-field--focused': focusedField === 'persona',\r\n          'md3-field--filled': formData.persona\r\n        }\">\r\n          <textarea\r\n            v-model=\"formData.persona\"\r\n            class=\"md3-field__textarea\"\r\n            placeholder=\" \"\r\n            :maxlength=\"500\"\r\n            @focus=\"focusedField = 'persona'\"\r\n            @blur=\"focusedField = ''\"\r\n          />\r\n          <label class=\"md3-field__label\">人物设定</label>\r\n          <text class=\"md3-field__counter\">{{ formData.persona.length }}/500</text>\r\n        </view>\r\n        \r\n        <view class=\"md3-field md3-field--multiline\" :class=\"{\r\n          'md3-field--focused': focusedField === 'background',\r\n          'md3-field--filled': formData.background\r\n        }\">\r\n          <textarea\r\n            v-model=\"formData.background\"\r\n            class=\"md3-field__textarea\"\r\n            placeholder=\" \"\r\n            :maxlength=\"1000\"\r\n            @focus=\"focusedField = 'background'\"\r\n            @blur=\"focusedField = ''\"\r\n          />\r\n          <label class=\"md3-field__label\">背景设定（可选）</label>\r\n          <text class=\"md3-field__counter\">{{ formData.background.length }}/1000</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\nimport { newBot } from '../model/bot_model'\r\n\r\nconst formData = ref({\r\n  name: '',\r\n  avatar: '',\r\n  description: '',\r\n  greeting: '你好！我是你的AI助手，有什么我可以帮你的吗？',\r\n  persona: '我是一个友好、专业的AI助手',\r\n  background: ''\r\n})\r\n\r\nconst isFormValid = computed(() => {\r\n  return formData.value.name && \r\n         formData.value.description && \r\n         formData.value.greeting && \r\n         formData.value.persona\r\n})\r\n\r\nconst focusedField = ref('')\r\n\r\nconst handleBack = () => {\r\n  uni.navigateBack()\r\n}\r\n\r\nconst chooseImage = () => {\r\n  uni.chooseImage({\r\n    count: 1,\r\n    sizeType: ['compressed'],\r\n    sourceType: ['album', 'camera'],\r\n    success: (res) => {\r\n      formData.value.avatar = res.tempFilePaths[0]\r\n    }\r\n  })\r\n}\r\n\r\nconst handleSave = async () => {\r\n  if (!isFormValid.value) return\r\n\r\n  try {\r\n    await newBot(formData.value)\r\n    uni.navigateBack()\r\n  } catch (error) {\r\n    console.error('创建机器人失败:', error)\r\n    uni.showToast({\r\n      title: '创建失败',\r\n      icon: 'none'\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import '../static/styles/md3.css';\r\n.add-bot-view {\r\n  padding: 0 32rpx;\r\n  \r\n  .header {\r\n    height: 88rpx;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    align-items: center;\r\n    \r\n    .nav-right {\r\n      padding: 20rpx;\r\n      color: var(--md-sys-color-primary);\r\n      \r\n      &.disabled {\r\n        opacity: 0.5;\r\n      }\r\n    }\r\n  }\r\n\r\n  .avatar-section {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin: 32rpx 0;\r\n\r\n    .avatar-wrapper {\r\n      position: relative;\r\n      width: 120rpx;\r\n      height: 120rpx;\r\n      \r\n      .avatar-overlay {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        background: rgba(0, 0, 0, 0.3);\r\n        border-radius: 50%;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        color: white;\r\n        opacity: 0;\r\n        transition: opacity 0.2s;\r\n      }\r\n      \r\n      &:active .avatar-overlay {\r\n        opacity: 1;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style> ","import MiniProgramPage from 'E:/Workspace/miniapp/chatBotMiniApp/pages/addBotView.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","newBot","MiniProgramPage"],"mappings":";;;;;;;;;;AAoHA,UAAM,WAAWA,cAAAA,IAAI;AAAA,MACnB,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,aAAa;AAAA,MACb,UAAU;AAAA,MACV,SAAS;AAAA,MACT,YAAY;AAAA,IACd,CAAC;AAED,UAAM,cAAcC,cAAQ,SAAC,MAAM;AACjC,aAAO,SAAS,MAAM,QACf,SAAS,MAAM,eACf,SAAS,MAAM,YACf,SAAS,MAAM;AAAA,IACxB,CAAC;AAED,UAAM,eAAeD,cAAG,IAAC,EAAE;AAM3B,UAAM,cAAc,MAAM;AACxBE,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,UAAU,CAAC,YAAY;AAAA,QACvB,YAAY,CAAC,SAAS,QAAQ;AAAA,QAC9B,SAAS,CAAC,QAAQ;AAChB,mBAAS,MAAM,SAAS,IAAI,cAAc,CAAC;AAAA,QAC5C;AAAA,MACL,CAAG;AAAA,IACH;AAEA,UAAM,aAAa,YAAY;AAC7B,UAAI,CAAC,YAAY;AAAO;AAExB,UAAI;AACF,cAAMC,gBAAM,OAAC,SAAS,KAAK;AAC3BD,sBAAAA,MAAI,aAAc;AAAA,MACnB,SAAQ,OAAO;AACdA,sBAAAA,MAAA,MAAA,SAAA,+BAAc,YAAY,KAAK;AAC/BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACZ,CAAK;AAAA,MACF;AAAA,IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjKA,GAAG,WAAWE,SAAe;"}